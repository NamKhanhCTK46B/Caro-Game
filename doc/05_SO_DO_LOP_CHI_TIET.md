# ğŸ“ TECHNICAL REPORT: SÆ  Äá»’ Lá»šP CHI TIáº¾T

## Má»¥c lá»¥c
1. [Tá»•ng quan](#1-tá»•ng-quan)
2. [SÆ¡ Ä‘á»“ Lá»›p Tá»•ng thá»ƒ](#2-sÆ¡-Ä‘á»“-lá»›p-tá»•ng-thá»ƒ)
3. [Package Model - Core Domain](#3-package-model---core-domain)
4. [Package Strategy - AI Algorithms](#4-package-strategy---ai-algorithms)
5. [Package Controller - MVC Controllers](#5-package-controller---mvc-controllers)
6. [Package View - Observer Interface](#6-package-view---observer-interface)
7. [Relationships vÃ  Dependencies](#7-relationships-vÃ -dependencies)
8. [Design Patterns Mapping](#8-design-patterns-mapping)

---

## 1. Tá»•ng quan

### 1.1 Thá»‘ng kÃª Codebase

| Metric | Sá»‘ lÆ°á»£ng |
|--------|----------|
| **Tá»•ng sá»‘ Classes** | 17 |
| **Tá»•ng sá»‘ Interfaces** | 2 |
| **Tá»•ng sá»‘ Enums** | 2 |
| **Packages** | 5 |
| **Design Patterns** | 4 (Strategy, Observer, Memento, Singleton) |

### 1.2 Package Overview

```
com.kthp.tro_choi_caro/
â”œâ”€â”€ App.java                    # JavaFX Application Entry
â”œâ”€â”€ controller/                 # 2 Controllers
â”‚   â”œâ”€â”€ MenuController
â”‚   â””â”€â”€ GameController
â”œâ”€â”€ model/                      # 10 Classes/Enums
â”‚   â”œâ”€â”€ GameModel
â”‚   â”œâ”€â”€ Board
â”‚   â”œâ”€â”€ Cell
â”‚   â”œâ”€â”€ Move
â”‚   â”œâ”€â”€ Player
â”‚   â”œâ”€â”€ GameState (Enum)
â”‚   â”œâ”€â”€ WinningLine
â”‚   â”œâ”€â”€ GameStateMemento
â”‚   â”œâ”€â”€ MoveHistory
â”‚   â””â”€â”€ ScoreManager
â”œâ”€â”€ view/                       # 1 Interface
â”‚   â””â”€â”€ GameObserver
â””â”€â”€ strategy/                   # 5 Classes/Interfaces
    â”œâ”€â”€ AIStrategy (Interface)
    â”œâ”€â”€ EasyAIStrategy
    â”œâ”€â”€ MediumAIStrategy
    â”œâ”€â”€ HardAIStrategy
    â””â”€â”€ AIPlayer
```

---

## 2. SÆ¡ Ä‘á»“ Lá»›p Tá»•ng thá»ƒ

### 2.1 Complete Class Diagram (UML Notation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              APPLICATION LAYER                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                              App                                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ + start(Stage): void                                                   â”‚ â”‚
â”‚  â”‚ + setRoot(String): void                                                â”‚ â”‚
â”‚  â”‚ + loadFXML(String): FXMLLoader                                         â”‚ â”‚
â”‚  â”‚ + main(String[]): void                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     MenuController         â”‚   â”‚     GameController         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ - easyRadio: RadioButton   â”‚   â”‚ - gameModel: GameModel     â”‚
    â”‚ - mediumRadio: RadioButton â”‚   â”‚ - aiPlayer: AIPlayer       â”‚
    â”‚ - hardRadio: RadioButton   â”‚   â”‚ - boardGrid: GridPane      â”‚
    â”‚ - startButton: Button      â”‚   â”‚ - cellButtons: Button[][]  â”‚
    â”‚ - difficulty: String       â”‚   â”‚ - statusLabel: Label       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ - turnLabel: Label         â”‚
    â”‚ + initialize(): void       â”‚   â”‚ - scoreLabel: Label        â”‚
    â”‚ + handleStartGame(): void  â”‚   â”‚ - difficultyLabel: Label   â”‚
    â”‚ + handleExit(): void       â”‚   â”‚ - newGameButton: Button    â”‚
    â”‚ + getSelectedDifficulty()  â”‚   â”‚ - undoButton: Button       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ - redoButton: Button       â”‚
                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                     â”‚ + initialize(): void       â”‚
                                     â”‚ + setDifficulty(String)    â”‚
                                     â”‚ + handleCellClick(int,int) â”‚
                                     â”‚ + handleNewGame(): void    â”‚
                                     â”‚ + handleBackToMenu(): void â”‚
                                     â”‚ + handleUndo(): void       â”‚
                                     â”‚ + handleRedo(): void       â”‚
                                     â”‚ + onMoveMade(Move): void   â”‚
                                     â”‚ + onGameStateChanged(...)  â”‚
                                     â”‚ + onBoardReset(): void     â”‚
                                     â”‚ + onBoardRestored(Board)   â”‚
                                     â”‚ + onPlayerChanged(String)  â”‚
                                     â”‚ + onWinningLineFound(...)  â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â”‚ implements
                                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               Â«interfaceÂ» GameObserver                          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ + onMoveMade(Move): void                                       â”‚
    â”‚ + onGameStateChanged(GameState, String): void                  â”‚
    â”‚ + onBoardReset(): void                                         â”‚
    â”‚ + onBoardRestored(Board): void                                 â”‚
    â”‚ + onPlayerChanged(String): void                                â”‚
    â”‚ + onWinningLineFound(WinningLine): void                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â–²
                                                â”‚ observes
                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MODEL LAYER                                     â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                            GameModel                                    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ - board: Board                                                         â”‚ â”‚
â”‚  â”‚ - player1: Player                                                      â”‚ â”‚
â”‚  â”‚ - player2: Player                                                      â”‚ â”‚
â”‚  â”‚ - currentPlayer: String                                                â”‚ â”‚
â”‚  â”‚ - gameState: GameState                                                 â”‚ â”‚
â”‚  â”‚ - winningLine: WinningLine                                             â”‚ â”‚
â”‚  â”‚ - moveNumber: int                                                      â”‚ â”‚
â”‚  â”‚ - observers: List<GameObserver>                                        â”‚ â”‚
â”‚  â”‚ - moveHistory: MoveHistory                                             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ + GameModel()                                                          â”‚ â”‚
â”‚  â”‚ + addObserver(GameObserver): void                                      â”‚ â”‚
â”‚  â”‚ + removeObserver(GameObserver): void                                   â”‚ â”‚
â”‚  â”‚ + makeMove(int, int): boolean                                          â”‚ â”‚
â”‚  â”‚ + resetGame(): void                                                    â”‚ â”‚
â”‚  â”‚ + undo(): boolean                                                      â”‚ â”‚
â”‚  â”‚ + redo(): boolean                                                      â”‚ â”‚
â”‚  â”‚ + canUndo(): boolean                                                   â”‚ â”‚
â”‚  â”‚ + canRedo(): boolean                                                   â”‚ â”‚
â”‚  â”‚ + getCurrentPlayer(): String                                           â”‚ â”‚
â”‚  â”‚ + getBoard(): Board                                                    â”‚ â”‚
â”‚  â”‚ + getGameState(): GameState                                            â”‚ â”‚
â”‚  â”‚ + getWinningLine(): WinningLine                                        â”‚ â”‚
â”‚  â”‚ + getMoveNumber(): int                                                 â”‚ â”‚
â”‚  â”‚ + createMemento(): GameStateMemento                                    â”‚ â”‚
â”‚  â”‚ + restoreFromMemento(GameStateMemento): void                           â”‚ â”‚
â”‚  â”‚ - switchPlayer(): void                                                 â”‚ â”‚
â”‚  â”‚ - checkWinCondition(int, int, String): boolean                         â”‚ â”‚
â”‚  â”‚ - notifyMoveMade(Move): void                                           â”‚ â”‚
â”‚  â”‚ - notifyGameStateChanged(GameState, String): void                      â”‚ â”‚
â”‚  â”‚ - notifyBoardReset(): void                                             â”‚ â”‚
â”‚  â”‚ - notifyBoardRestored(Board): void                                     â”‚ â”‚
â”‚  â”‚ - notifyPlayerChanged(String): void                                    â”‚ â”‚
â”‚  â”‚ - notifyWinningLineFound(WinningLine): void                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚                    â”‚                     â”‚                           â”‚
â”‚       â”‚ has                â”‚ uses                â”‚ uses                      â”‚
â”‚       â–¼                    â–¼                     â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  Board   â”‚   â”‚  MoveHistory    â”‚   â”‚ GameStateMemento â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Package Model - Core Domain

### 3.1 GameModel (Subject + Originator)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            GameModel                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - board: Board                                                     â”‚
â”‚ - player1: Player                                                  â”‚
â”‚ - player2: Player                                                  â”‚
â”‚ - currentPlayer: String                                            â”‚
â”‚ - gameState: GameState                                             â”‚
â”‚ - winningLine: WinningLine                                         â”‚
â”‚ - moveNumber: int                                                  â”‚
â”‚ - observers: List<GameObserver>                                    â”‚
â”‚ - moveHistory: MoveHistory                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + GameModel()                                                      â”‚
â”‚                                                                     â”‚
â”‚ // Observer Pattern - Subject methods                              â”‚
â”‚ + addObserver(GameObserver observer): void                         â”‚
â”‚ + removeObserver(GameObserver observer): void                      â”‚
â”‚                                                                     â”‚
â”‚ // Game Logic                                                       â”‚
â”‚ + makeMove(int row, int col): boolean                              â”‚
â”‚ + resetGame(): void                                                â”‚
â”‚                                                                     â”‚
â”‚ // Memento Pattern - Originator methods                            â”‚
â”‚ + undo(): boolean                                                  â”‚
â”‚ + redo(): boolean                                                  â”‚
â”‚ + canUndo(): boolean                                               â”‚
â”‚ + canRedo(): boolean                                               â”‚
â”‚ + createMemento(): GameStateMemento                                â”‚
â”‚ + restoreFromMemento(GameStateMemento memento): void               â”‚
â”‚                                                                     â”‚
â”‚ // Getters                                                          â”‚
â”‚ + getCurrentPlayer(): String                                       â”‚
â”‚ + getBoard(): Board                                                â”‚
â”‚ + getGameState(): GameState                                        â”‚
â”‚ + getWinningLine(): WinningLine                                    â”‚
â”‚ + getMoveNumber(): int                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methodsÂ»                                                   â”‚
â”‚ - switchPlayer(): void                                             â”‚
â”‚ - checkWinCondition(int row, int col, String player): boolean      â”‚
â”‚ - notifyMoveMade(Move move): void                                  â”‚
â”‚ - notifyGameStateChanged(GameState state, String winner): void     â”‚
â”‚ - notifyBoardReset(): void                                         â”‚
â”‚ - notifyBoardRestored(Board board): void                           â”‚
â”‚ - notifyPlayerChanged(String player): void                         â”‚
â”‚ - notifyWinningLineFound(WinningLine line): void                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Patterns:**
- âœ… **Observer Pattern** - Subject (notifies observers)
- âœ… **Memento Pattern** - Originator (creates/restores mementos)

**Responsibilities:**
- Quáº£n lÃ½ tráº¡ng thÃ¡i game
- Validate vÃ  thá»±c hiá»‡n nÆ°á»›c Ä‘i
- Kiá»ƒm tra Ä‘iá»u kiá»‡n tháº¯ng/thua/hÃ²a
- ThÃ´ng bÃ¡o thay Ä‘á»•i cho observers
- LÆ°u vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i

---

### 3.2 Board (Game Board)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Board                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public constantsÂ»                                                  â”‚
â”‚ + BOARD_SIZE: int = 15                                             â”‚
â”‚ + WIN_CONDITION: int = 5                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - cells: Cell[][]                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + Board()                                                          â”‚
â”‚ + Board(Board other)          // Copy constructor                  â”‚
â”‚                                                                     â”‚
â”‚ // Cell operations                                                  â”‚
â”‚ + getCell(int row, int col): Cell                                  â”‚
â”‚ + makeMove(int row, int col, String player): boolean               â”‚
â”‚ + isCellEmpty(int row, int col): boolean                           â”‚
â”‚ + isValidPosition(int row, int col): boolean                       â”‚
â”‚                                                                     â”‚
â”‚ // Board state                                                      â”‚
â”‚ + getEmptyCells(): List<Cell>                                      â”‚
â”‚ + isFull(): boolean                                                â”‚
â”‚ + clear(): void                                                    â”‚
â”‚ + deepCopy(): Board                                                â”‚
â”‚                                                                     â”‚
â”‚ // Win condition checking                                           â”‚
â”‚ + findWinningLine(int row, int col, String player): WinningLine    â”‚
â”‚ + checkDirection(int row, int col, int dRow, int dCol,             â”‚
â”‚                  String player): int                               â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + toString(): String                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ contains 225 (15Ã—15)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               Cell                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - row: int                                                         â”‚
â”‚ - col: int                                                         â”‚
â”‚ - content: String                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + Cell(int row, int col)                                           â”‚
â”‚ + Cell(Cell other)            // Copy constructor                  â”‚
â”‚                                                                     â”‚
â”‚ // Getters                                                          â”‚
â”‚ + getRow(): int                                                    â”‚
â”‚ + getCol(): int                                                    â”‚
â”‚ + getContent(): String                                             â”‚
â”‚                                                                     â”‚
â”‚ // Setters                                                          â”‚
â”‚ + setContent(String content): void                                 â”‚
â”‚                                                                     â”‚
â”‚ // State checking                                                   â”‚
â”‚ + isEmpty(): boolean                                               â”‚
â”‚ + clear(): void                                                    â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + toString(): String                                               â”‚
â”‚ + equals(Object obj): boolean                                      â”‚
â”‚ + hashCode(): int                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities:**
- Quáº£n lÃ½ ma tráº­n 15Ã—15 cells
- Validate vá»‹ trÃ­ nÆ°á»›c Ä‘i
- TÃ¬m Ä‘Æ°á»ng tháº¯ng (5 quÃ¢n liÃªn tiáº¿p)
- Cung cáº¥p thÃ´ng tin vá» tráº¡ng thÃ¡i bÃ n cá»

---

### 3.3 Value Objects (Move, WinningLine)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               Move                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private final fieldsÂ»                                              â”‚
â”‚ - row: int                                                         â”‚
â”‚ - col: int                                                         â”‚
â”‚ - player: String                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + Move(int row, int col, String player)                            â”‚
â”‚                                                                     â”‚
â”‚ // Getters (immutable)                                              â”‚
â”‚ + getRow(): int                                                    â”‚
â”‚ + getCol(): int                                                    â”‚
â”‚ + getPlayer(): String                                              â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + toString(): String                                               â”‚
â”‚ + equals(Object obj): boolean                                      â”‚
â”‚ + hashCode(): int                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          WinningLine                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«nested enumÂ»                                                       â”‚
â”‚ + Direction { HORIZONTAL, VERTICAL, DIAGONAL_DOWN, DIAGONAL_UP }   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private final fieldsÂ»                                              â”‚
â”‚ - positions: List<int[]>                                           â”‚
â”‚ - direction: Direction                                             â”‚
â”‚ - winner: String                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + WinningLine(List<int[]> positions, Direction dir, String winner) â”‚
â”‚                                                                     â”‚
â”‚ // Getters                                                          â”‚
â”‚ + getPositions(): List<int[]>                                      â”‚
â”‚ + getDirection(): Direction                                        â”‚
â”‚ + getWinner(): String                                              â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + toString(): String                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Characteristics:**
- âœ… **Immutable** - KhÃ´ng thá»ƒ thay Ä‘á»•i sau khi táº¡o
- âœ… **Value Objects** - So sÃ¡nh báº±ng giÃ¡ trá»‹
- âœ… **Thread-safe** - An toÃ n vá»›i Ä‘a luá»“ng

---

### 3.4 Player Entity

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Player                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - symbol: String                // "X" or "O"                       â”‚
â”‚ - name: String                  // "Player" or "AI"                 â”‚
â”‚ - isHuman: boolean                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + Player(String symbol, String name, boolean isHuman)              â”‚
â”‚                                                                     â”‚
â”‚ // Getters                                                          â”‚
â”‚ + getSymbol(): String                                              â”‚
â”‚ + getName(): String                                                â”‚
â”‚ + isHuman(): boolean                                               â”‚
â”‚                                                                     â”‚
â”‚ // Setters                                                          â”‚
â”‚ + setName(String name): void                                       â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + toString(): String                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.5 GameState Enum

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Â«enumerationÂ»                                â”‚
â”‚                          GameState                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + PLAYING                                                          â”‚
â”‚ + X_WON                                                            â”‚
â”‚ + O_WON                                                            â”‚
â”‚ + DRAW                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.6 Memento Pattern Classes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GameStateMemento                               â”‚
â”‚                         (Memento)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private final fieldsÂ»                                              â”‚
â”‚ - board: Board                                                     â”‚
â”‚ - currentPlayer: String                                            â”‚
â”‚ - gameState: GameState                                             â”‚
â”‚ - moveNumber: int                                                  â”‚
â”‚ - timestamp: long                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«package-private constructorÂ»                                       â”‚
â”‚ GameStateMemento(Board board, String player,                       â”‚
â”‚                  GameState state, int moveNum)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«package-private gettersÂ»                                           â”‚
â”‚ Board getBoard()                                                   â”‚
â”‚ String getCurrentPlayer()                                          â”‚
â”‚ GameState getGameState()                                           â”‚
â”‚ int getMoveNumber()                                                â”‚
â”‚ long getTimestamp()                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MoveHistory                                 â”‚
â”‚                        (Caretaker)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - history: Stack<GameStateMemento>                                 â”‚
â”‚ - redoStack: Stack<GameStateMemento>                               â”‚
â”‚ - maxHistorySize: int = 100                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + MoveHistory()                                                    â”‚
â”‚                                                                     â”‚
â”‚ // History management                                               â”‚
â”‚ + saveState(GameStateMemento memento): void                        â”‚
â”‚ + undo(): GameStateMemento                                         â”‚
â”‚ + redo(): GameStateMemento                                         â”‚
â”‚                                                                     â”‚
â”‚ // State queries                                                    â”‚
â”‚ + canUndo(): boolean                                               â”‚
â”‚ + canRedo(): boolean                                               â”‚
â”‚ + getHistorySize(): int                                            â”‚
â”‚ + getRedoStackSize(): int                                          â”‚
â”‚                                                                     â”‚
â”‚ // Utility                                                          â”‚
â”‚ + clear(): void                                                    â”‚
â”‚ + clearRedoStack(): void                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Pattern:** Memento Pattern
- **Originator:** GameModel
- **Memento:** GameStateMemento
- **Caretaker:** MoveHistory

---

### 3.7 ScoreManager (Singleton)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ScoreManager                                â”‚
â”‚                         (Singleton)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private static fieldÂ»                                              â”‚
â”‚ - instance: ScoreManager                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - playerWins: int                                                  â”‚
â”‚ - aiWins: int                                                      â”‚
â”‚ - draws: int                                                       â”‚
â”‚ - totalGames: int                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private constructorÂ»                                               â”‚
â”‚ - ScoreManager()                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public static methodÂ»                                              â”‚
â”‚ + getInstance(): ScoreManager                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + addWin(String winner): void                                      â”‚
â”‚ + addDraw(): void                                                  â”‚
â”‚ + resetScores(): void                                              â”‚
â”‚                                                                     â”‚
â”‚ // Getters                                                          â”‚
â”‚ + getPlayerWins(): int                                             â”‚
â”‚ + getAiWins(): int                                                 â”‚
â”‚ + getDraws(): int                                                  â”‚
â”‚ + getTotalGames(): int                                             â”‚
â”‚                                                                     â”‚
â”‚ // Formatted output                                                 â”‚
â”‚ + getScoreString(): String                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Pattern:** Singleton Pattern
- Äáº£m báº£o chá»‰ cÃ³ 1 instance quáº£n lÃ½ Ä‘iá»ƒm sá»‘
- Global access point

---

## 4. Package Strategy - AI Algorithms

### 4.1 Strategy Pattern Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Â«interfaceÂ» AIStrategy                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + findBestMove(Board board, String aiPlayer): Move                 â”‚
â”‚ + getStrategyName(): String                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚ implements
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EasyAIStrategy   â”‚ â”‚MediumAIStrategy â”‚ â”‚HardAIStrategy  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AIPlayer                                  â”‚
â”‚                          (Context)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - strategy: AIStrategy                                             â”‚
â”‚ - symbol: String                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + AIPlayer(AIStrategy strategy, String symbol)                     â”‚
â”‚ + setStrategy(AIStrategy strategy): void                           â”‚
â”‚ + makeMove(Board board): Move                                      â”‚
â”‚ + getStrategyName(): String                                        â”‚
â”‚ + getSymbol(): String                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 EasyAIStrategy (Random Selection)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EasyAIStrategy                                â”‚
â”‚                    (Concrete Strategy)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - random: Random                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + EasyAIStrategy()                                                 â”‚
â”‚                                                                     â”‚
â”‚ // AIStrategy interface                                             â”‚
â”‚ + findBestMove(Board board, String aiPlayer): Move                 â”‚
â”‚ + getStrategyName(): String                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«algorithmÂ»                                                         â”‚
â”‚ 1. Get all empty cells from board                                  â”‚
â”‚ 2. Randomly select one cell                                        â”‚
â”‚ 3. Return Move with selected position                              â”‚
â”‚                                                                     â”‚
â”‚ Complexity: O(n) where n = number of empty cells                   â”‚
â”‚ Difficulty: Dá»… (Easy)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.3 MediumAIStrategy (Heuristic Evaluation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MediumAIStrategy                                â”‚
â”‚                   (Concrete Strategy)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private constantsÂ»                                                 â”‚
â”‚ - SCORE_FIVE: int = 100000                                         â”‚
â”‚ - SCORE_FOUR: int = 10000                                          â”‚
â”‚ - SCORE_THREE: int = 1000                                          â”‚
â”‚ - SCORE_TWO: int = 100                                             â”‚
â”‚ - SCORE_ONE: int = 10                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + MediumAIStrategy()                                               â”‚
â”‚ + findBestMove(Board board, String aiPlayer): Move                 â”‚
â”‚ + getStrategyName(): String                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methodsÂ»                                                   â”‚
â”‚ - evaluatePosition(Board board, int row, int col,                  â”‚
â”‚                    String player): int                             â”‚
â”‚ - countConsecutive(Board board, int row, int col,                  â”‚
â”‚                     int dRow, int dCol, String player): int        â”‚
â”‚ - getScore(int count): int                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«algorithmÂ»                                                         â”‚
â”‚ 1. Iterate through all empty cells                                 â”‚
â”‚ 2. For each cell, calculate score:                                 â”‚
â”‚    - Check 4 directions (H, V, D1, D2)                             â”‚
â”‚    - Count consecutive pieces                                      â”‚
â”‚    - Apply scoring function                                        â”‚
â”‚ 3. Select cell with highest score                                  â”‚
â”‚                                                                     â”‚
â”‚ Complexity: O(n Ã— m) where:                                        â”‚
â”‚   n = empty cells, m = 4 directions                                â”‚
â”‚ Difficulty: Trung BÃ¬nh (Medium)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.4 HardAIStrategy (Minimax + Alpha-Beta)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HardAIStrategy                                 â”‚
â”‚                   (Concrete Strategy)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private constantsÂ»                                                 â”‚
â”‚ - MAX_DEPTH: int = 4                                               â”‚
â”‚ - WIN_SCORE: int = 10000                                           â”‚
â”‚ - SEARCH_RADIUS: int = 2                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + HardAIStrategy()                                                 â”‚
â”‚ + findBestMove(Board board, String aiPlayer): Move                 â”‚
â”‚ + getStrategyName(): String                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methods - MinimaxÂ»                                         â”‚
â”‚ - minimax(Board board, int depth, int alpha, int beta,             â”‚
â”‚           boolean isMaximizing, String aiPlayer,                   â”‚
â”‚           String opponent): int                                    â”‚
â”‚ - evaluateBoard(Board board, String aiPlayer,                      â”‚
â”‚                 String opponent): int                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methods - HeuristicsÂ»                                      â”‚
â”‚ - evaluateLine(int aiCount, int opponentCount,                     â”‚
â”‚                int empty): int                                     â”‚
â”‚ - countInLine(Board board, int row, int col,                       â”‚
â”‚               int dRow, int dCol, String player): int              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methods - OptimizationÂ»                                    â”‚
â”‚ - getCandidateMoves(Board board): List<Cell>                       â”‚
â”‚ - isNearPiece(Board board, int row, int col,                       â”‚
â”‚               int radius): boolean                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«algorithmÂ»                                                         â”‚
â”‚ 1. Generate candidate moves (within radius of pieces)              â”‚
â”‚ 2. For each candidate:                                             â”‚
â”‚    - Apply move on cloned board                                    â”‚
â”‚    - Call minimax(depth=4, alpha=-âˆ, beta=+âˆ)                      â”‚
â”‚    - Evaluate with Alpha-Beta pruning                              â”‚
â”‚ 3. Return move with best minimax value                             â”‚
â”‚                                                                     â”‚
â”‚ Minimax with Alpha-Beta Pruning:                                   â”‚
â”‚ - Maximizing player: AI (maximize score)                           â”‚
â”‚ - Minimizing player: Opponent (minimize score)                     â”‚
â”‚ - Alpha-Beta: Prune branches that won't affect result              â”‚
â”‚                                                                     â”‚
â”‚ Complexity: O(b^d) where:                                          â”‚
â”‚   b = branching factor (~20-40 moves)                              â”‚
â”‚   d = depth (4 levels)                                             â”‚
â”‚ Optimized with Alpha-Beta: ~O(b^(d/2))                             â”‚
â”‚                                                                     â”‚
â”‚ Difficulty: KhÃ³ (Hard)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Package Controller - MVC Controllers

### 5.1 GameController (Observer + Controller)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GameController                               â”‚
â”‚                  implements GameObserver                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«FXML-injected fieldsÂ»                                              â”‚
â”‚ @FXML - boardGrid: GridPane                                        â”‚
â”‚ @FXML - statusLabel: Label                                         â”‚
â”‚ @FXML - turnLabel: Label                                           â”‚
â”‚ @FXML - scoreLabel: Label                                          â”‚
â”‚ @FXML - difficultyLabel: Label                                     â”‚
â”‚ @FXML - newGameButton: Button                                      â”‚
â”‚ @FXML - undoButton: Button                                         â”‚
â”‚ @FXML - redoButton: Button                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - gameModel: GameModel                                             â”‚
â”‚ - aiPlayer: AIPlayer                                               â”‚
â”‚ - cellButtons: Button[][]                                          â”‚
â”‚ - difficulty: String                                               â”‚
â”‚ - scoreManager: ScoreManager                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«lifecycle methodsÂ»                                                 â”‚
â”‚ + initialize(): void                                               â”‚
â”‚ + setDifficulty(String difficulty): void                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«event handlersÂ»                                                    â”‚
â”‚ + handleCellClick(int row, int col): void                          â”‚
â”‚ + handleNewGame(): void                                            â”‚
â”‚ + handleBackToMenu(): void                                         â”‚
â”‚ + handleUndo(): void                                               â”‚
â”‚ + handleRedo(): void                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«GameObserver implementationÂ»                                       â”‚
â”‚ + onMoveMade(Move move): void                                      â”‚
â”‚ + onGameStateChanged(GameState state, String winner): void         â”‚
â”‚ + onBoardReset(): void                                             â”‚
â”‚ + onBoardRestored(Board board): void                               â”‚
â”‚ + onPlayerChanged(String currentPlayer): void                      â”‚
â”‚ + onWinningLineFound(WinningLine winningLine): void                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private helper methodsÂ»                                            â”‚
â”‚ - initializeBoard(): void                                          â”‚
â”‚ - createCell(int row, int col): Button                             â”‚
â”‚ - updateCellButton(int row, int col, String content): void         â”‚
â”‚ - clearBoard(): void                                               â”‚
â”‚ - redrawBoard(Board board): void                                   â”‚
â”‚ - highlightWinningLine(WinningLine line): void                     â”‚
â”‚ - disableBoard(): void                                             â”‚
â”‚ - enableBoard(): void                                              â”‚
â”‚ - updateScoreDisplay(): void                                       â”‚
â”‚ - updateUndoRedoButtons(): void                                    â”‚
â”‚ - showWinMessage(String winner): void                              â”‚
â”‚ - showDrawMessage(): void                                          â”‚
â”‚ - handleAIMove(): void                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities:**
- Khá»Ÿi táº¡o UI components (bÃ n cá» 15Ã—15)
- Xá»­ lÃ½ user events (clicks, buttons)
- Observe changes tá»« GameModel
- Update UI theo Model state
- Äiá»u phá»‘i AI moves

---

### 5.2 MenuController

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MenuController                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«FXML-injected fieldsÂ»                                              â”‚
â”‚ @FXML - easyRadio: RadioButton                                     â”‚
â”‚ @FXML - mediumRadio: RadioButton                                   â”‚
â”‚ @FXML - hardRadio: RadioButton                                     â”‚
â”‚ @FXML - startButton: Button                                        â”‚
â”‚ @FXML - difficultyGroup: ToggleGroup                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private fieldsÂ»                                                    â”‚
â”‚ - selectedDifficulty: String = "MEDIUM"                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«lifecycle methodsÂ»                                                 â”‚
â”‚ + initialize(): void                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«event handlersÂ»                                                    â”‚
â”‚ + handleStartGame(): void                                          â”‚
â”‚ + handleExit(): void                                               â”‚
â”‚ + handleDifficultyChange(): void                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«public methodsÂ»                                                    â”‚
â”‚ + getSelectedDifficulty(): String                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â«private methodsÂ»                                                   â”‚
â”‚ - switchToGameScene(): void                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Responsibilities:**
- Quáº£n lÃ½ menu chá»n Ä‘á»™ khÃ³
- Handle radio button selection
- Chuyá»ƒn scene sang GameController vá»›i difficulty

---

## 6. Package View - Observer Interface

### 6.1 GameObserver Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Â«interfaceÂ» GameObserver                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + onMoveMade(Move move): void                                      â”‚
â”‚   // Called when a move is made on the board                       â”‚
â”‚                                                                     â”‚
â”‚ + onGameStateChanged(GameState newState, String winner): void      â”‚
â”‚   // Called when game state changes (PLAYING â†’ X_WON/O_WON/DRAW)   â”‚
â”‚                                                                     â”‚
â”‚ + onBoardReset(): void                                             â”‚
â”‚   // Called when board is cleared (New Game)                       â”‚
â”‚                                                                     â”‚
â”‚ + onBoardRestored(Board board): void                               â”‚
â”‚   // Called when board is restored from memento (Undo/Redo)        â”‚
â”‚                                                                     â”‚
â”‚ + onPlayerChanged(String currentPlayer): void                      â”‚
â”‚   // Called when turn switches (X â†’ O or O â†’ X)                    â”‚
â”‚                                                                     â”‚
â”‚ + onWinningLineFound(WinningLine winningLine): void                â”‚
â”‚   // Called when winning line is detected                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚ implements
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  GameController   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Pattern:** Observer Pattern
- **Subject:** GameModel
- **Observer Interface:** GameObserver
- **Concrete Observer:** GameController

---

## 7. Relationships vÃ  Dependencies

### 7.1 Package Dependency Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         controller                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚MenuController  â”‚          â”‚GameController  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚                    â”‚
       â”‚ uses                       â”‚ uses               â”‚ implements
       â–¼                            â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    model     â”‚         â”‚    strategy      â”‚    â”‚    view     â”‚
â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  uses   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Dependency Rules:**
```
controller â†’ model     âœ… Controller uses Model
controller â†’ view      âœ… Controller implements Observer interface
controller â†’ strategy  âœ… Controller uses AIPlayer
strategy â†’ model       âœ… Strategy uses Board, Move
model â†’ view           âœ… Model notifies Observer (interface)
view â†’ model           âŒ View khÃ´ng depend vÃ o Model (chá»‰ data types)
```

---

### 7.2 Class Relationships Matrix

| From Class | To Class | Relationship | Multiplicity | Description |
|------------|----------|--------------|--------------|-------------|
| GameModel | Board | **Composition** | 1 â†’ 1 | GameModel owns Board |
| GameModel | GameObserver | **Association** | 1 â†’ * | Subject notifies Observers |
| GameModel | MoveHistory | **Composition** | 1 â†’ 1 | GameModel owns MoveHistory |
| GameModel | GameStateMemento | **Dependency** | 1 â†’ * | Creates Mementos |
| Board | Cell | **Composition** | 1 â†’ 225 | Board contains 15Ã—15 Cells |
| MoveHistory | GameStateMemento | **Aggregation** | 1 â†’ * | Stores Mementos |
| GameController | GameModel | **Association** | 1 â†’ 1 | Controller uses Model |
| GameController | AIPlayer | **Association** | 1 â†’ 1 | Controller uses AI |
| GameController | GameObserver | **Realization** | - | Implements interface |
| AIPlayer | AIStrategy | **Association** | 1 â†’ 1 | Context uses Strategy |
| EasyAIStrategy | AIStrategy | **Realization** | - | Implements interface |
| MediumAIStrategy | AIStrategy | **Realization** | - | Implements interface |
| HardAIStrategy | AIStrategy | **Realization** | - | Implements interface |

---

### 7.3 Association Types Explained

#### ğŸ”· **Composition** (Strong Ownership)
```
GameModel â—†â”€â”€â”€â”€â”€â”€ Board
          â—†â”€â”€â”€â”€â”€â”€ MoveHistory
```
- GameModel **owns** Board vÃ  MoveHistory
- Khi GameModel bá»‹ destroy, Board vÃ  MoveHistory cÅ©ng bá»‹ destroy
- Lifecycle phá»¥ thuá»™c hoÃ n toÃ n

#### ğŸ”¶ **Aggregation** (Weak Ownership)
```
MoveHistory â—‡â”€â”€â”€â”€â”€â”€ GameStateMemento
```
- MoveHistory **chá»©a** Mementos nhÆ°ng khÃ´ng sá»Ÿ há»¯u hoÃ n toÃ n
- Mementos cÃ³ thá»ƒ tá»“n táº¡i Ä‘á»™c láº­p

#### â¡ï¸ **Association** (Uses)
```
GameController â”€â”€â”€â”€â”€â”€ GameModel
GameController â”€â”€â”€â”€â”€â”€ AIPlayer
```
- Controller **sá»­ dá»¥ng** Model vÃ  AIPlayer
- Quan há»‡ loose coupling

#### â‹¯â–· **Dependency** (Temporary Usage)
```
GameModel â€¥â€¥â€¥â–· GameStateMemento
AIStrategy â€¥â€¥â€¥â–· Board
```
- GameModel táº¡o Memento khi cáº§n
- Strategy nháº­n Board qua parameter

#### â—â”€â”€â”€ **Realization** (Implements Interface)
```
GameController â—â”€â”€â”€â”€â”€ GameObserver
EasyAIStrategy â—â”€â”€â”€â”€â”€ AIStrategy
```
- Class implements interface

---

## 8. Design Patterns Mapping

### 8.1 Complete Pattern Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DESIGN PATTERNS IN PROJECT                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. STRATEGY PATTERN                                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Interface:  AIStrategy                                     â”‚ â”‚
â”‚  â”‚ Context:    AIPlayer                                       â”‚ â”‚
â”‚  â”‚ Strategies: EasyAIStrategy                                 â”‚ â”‚
â”‚  â”‚             MediumAIStrategy                               â”‚ â”‚
â”‚  â”‚             HardAIStrategy                                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Purpose: Swappable AI algorithms                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 2. OBSERVER PATTERN                                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Subject:    GameModel                                      â”‚ â”‚
â”‚  â”‚ Interface:  GameObserver                                   â”‚ â”‚
â”‚  â”‚ Observer:   GameController                                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Events:     onMoveMade                                     â”‚ â”‚
â”‚  â”‚             onGameStateChanged                             â”‚ â”‚
â”‚  â”‚             onBoardReset                                   â”‚ â”‚
â”‚  â”‚             onBoardRestored                                â”‚ â”‚
â”‚  â”‚             onPlayerChanged                                â”‚ â”‚
â”‚  â”‚             onWinningLineFound                             â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Purpose: Real-time UI updates                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 3. MEMENTO PATTERN                                         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Originator: GameModel                                      â”‚ â”‚
â”‚  â”‚ Memento:    GameStateMemento                               â”‚ â”‚
â”‚  â”‚ Caretaker:  MoveHistory                                    â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Features:   - Undo/Redo functionality                      â”‚ â”‚
â”‚  â”‚             - History stack (max 100)                      â”‚ â”‚
â”‚  â”‚             - Deep copy of Board                           â”‚ â”‚
â”‚  â”‚             - Immutable snapshots                          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Purpose: State restoration & history management           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 4. SINGLETON PATTERN                                       â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Class:      ScoreManager                                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Features:   - Private constructor                          â”‚ â”‚
â”‚  â”‚             - Static instance                              â”‚ â”‚
â”‚  â”‚             - Global access point                          â”‚ â”‚
â”‚  â”‚             - Lazy initialization                          â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Purpose: Global score management                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 5. MVC PATTERN (Architecture)                              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Model:      GameModel, Board, Cell, Move, etc.             â”‚ â”‚
â”‚  â”‚ View:       FXML files, CSS files, GameObserver            â”‚ â”‚
â”‚  â”‚ Controller: GameController, MenuController                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚ Purpose: Separation of concerns                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 8.2 Pattern Interaction Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  GameController  â”‚
                    â”‚   (Controller)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚            â”‚
        implements      uses â”‚ uses      uses
                â”‚            â”‚            â”‚
                â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚GameObserver  â”‚  â”‚ GameModel â”‚  â”‚ AIPlayer â”‚
    â”‚ (Observer)   â”‚  â”‚ (Subject) â”‚  â”‚ (Context)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â–²               â”‚              â”‚
            â”‚               â”‚              â”‚ uses
            â”‚         creates/restores     â”‚
            â”‚               â”‚              â–¼
            â”‚               â–¼         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚AIStrategyâ”‚
            â”‚        â”‚GameMemento  â”‚  â”‚(Strategy)â”‚
            â”‚        â”‚  (Memento)  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
            â”‚               â”‚              â”‚ implements
            â”‚        stored in             â”‚
            â”‚               â–¼              â–¼
            â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”
            â”‚        â”‚MoveHistory  â”‚  â”‚Easy/  â”‚
            â”‚        â”‚ (Caretaker) â”‚  â”‚Medium/â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚Hard AIâ”‚
                  notifies             â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Káº¿t luáº­n

### Tá»•ng káº¿t Thiáº¿t káº¿

âœ… **17 Classes** Ä‘Æ°á»£c tá»• chá»©c trong 5 packages  
âœ… **4 Design Patterns** Ã¡p dá»¥ng nháº¥t quÃ¡n  
âœ… **SOLID Principles** tuÃ¢n thá»§ nghiÃªm ngáº·t  
âœ… **Loose Coupling** thÃ´ng qua interfaces  
âœ… **High Cohesion** - Má»—i class cÃ³ trÃ¡ch nhiá»‡m rÃµ rÃ ng  

### Æ¯u Ä‘iá»ƒm Kiáº¿n trÃºc

1. **Extensibility:** Dá»… thÃªm AI strategies má»›i
2. **Maintainability:** Code rÃµ rÃ ng, cÃ³ cáº¥u trÃºc
3. **Testability:** Má»—i component test Ä‘á»™c láº­p
4. **Scalability:** Dá»… má»Ÿ rá»™ng features
5. **Reusability:** Components cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng

---

 
**NgÆ°á»i viáº¿t:** 2212391- Nguyá»…n HoÃ ng Nam KhÃ¡nh  
**PhiÃªn báº£n:** 2.0  
**Tá»•ng sá»‘ trang:** 15+
